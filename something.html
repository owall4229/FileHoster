<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Windows 3.0 Style Desktop</title>

    <style>
@font-face {
    font-family: "CPCompanyFlashBig";
    src: url("VP Pixel Standard.ttf");
}

body {
    background-color: white;
    margin: 20px;
    height: 100vh;
    font-family: Arial, sans-serif;
}

/* Desktop Icon Buttons */
.win-button {
    background: transparent;
    border: 1px solid transparent;
    cursor: pointer;
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    padding: 5px;
    margin: 10px;
}

.win-button.selected {
    border: 1px dashed #000;
}

.button-label {
    margin-top: 5px;
}

.windows-style {
    font-family: "CPCompanyFlashBig", Arial, sans-serif;
    font-size: 12px;
    text-align: center;
    color: black;
    white-space: nowrap;
    padding: 1px 3px;
}

.win-button.selected .button-label {
    background-color: #000080;
    color: white;
}

/* Popup Window */
.popup {
    display: none;
    position: absolute;
    background-color: #FFF;
    width: auto;
    max-width: 95vw;
    height: 400px;
    overflow: auto;
    box-sizing: border-box;
    border-top: 1px solid #FFF;
    border-left: 1px solid #FFF;
    border-right: 1px solid #808080;
    border-bottom: 1px solid #808080;
    padding: 2px;
}

.popup::before {
    content: '';
    position: absolute;
    top: 1px;
    left: 1px;
    right: 1px;
    bottom: 1px;
    border-top: 1px solid #808080;
    border-left: 1px solid #808080;
    border-right: 1px solid #FFF;
    border-bottom: 1px solid #FFF;
    pointer-events: none;
}

.popupheader {
    padding: 3px 5px;
    background-color: #000080;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    font-weight: bold;
    cursor: grab;
    text-transform: uppercase;
    position: sticky;
    top: 0;
    z-index: 10;
}

.window-controls {
    display: flex;
    gap: 4px;
}

.window-controls span {
    cursor: pointer;
    background-color: #C0C0C0;
    color: black;
    border-top: 1px solid #FFF;
    border-left: 1px solid #FFF;
    border-right: 1px solid #808080;
    border-bottom: 1px solid #808080;
    padding: 0px 4px;
    font-size: 12px;
}

/* Drag Outline */
.dragging-outline {
    position: absolute;
    background-image: repeating-conic-gradient(#C0C0C0 0% 25%, transparent 0% 50%);
    background-size: 4px 4px;
    border: 1px solid #000;
    z-index: 9999;
    pointer-events: none;
    opacity: 0.8;
}

/* Invisible Resize Handle */
.popup-resize {
    position: absolute;
    width: 12px;
    height: 12px;
    right: 0;
    bottom: 0;
    cursor: se-resize;
    background: transparent;
}

.popupcontent {
    width: 100%;
    height: calc(100% - 30px);
    display: flex;
}

.pdf-container {
    flex: 1;
    width: 100%;
    height: 100%;
}

.pdf-container object,
.pdf-container iframe {
    width: 100%;
    height: 100%;
    display: block;
}

#content {
    display: none;
}

/* ============================
   CRT EMULATOR STYLES (POPUP5)
   ============================ */

.idle-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.75);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.6s ease;
    z-index: 200;
}

/* Desk surface */
#popup5 .desk {
    width: 100%;
    height: 120px;
    background: #5a4633;
    box-shadow: inset 0 8px 20px rgba(0,0,0,0.4);
    position: absolute;
    bottom: 0;
    left: 0;
    z-index: -10;
}

/* CRT monitor shell */
#popup5 .crt-monitor {
    background: #d9d4c8;
    padding: 25px;
    border-radius: 12px;
    box-shadow:
        0 0 0 4px #b8b2a6 inset,
        0 0 0 8px #e8e4da inset,
        0 0 40px rgba(0,0,0,0.7);
    position: relative;
    margin: 0 auto;
}

/* Ventilation slits */
#popup5 .vents {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 70%;
    height: 6px;
    background: repeating-linear-gradient(
        to right,
        #a8a39a 0px,
        #a8a39a 8px,
        transparent 8px,
        transparent 16px
    );
    opacity: 0.6;
}

/* Power LED */
#popup5 .power-light {
    position: absolute;
    bottom: 12px;
    left: 30px;
    width: 12px;
    height: 12px;
    background: #0f0;
    border-radius: 50%;
    box-shadow: 0 0 6px #0f0;
}

/* Label under screen */
#popup5 .brand-label {
    position: absolute;
    bottom: 8px;
    right: 30px;
    font-size: 14px;
    color: #444;
    font-family: "MS Sans Serif", sans-serif;
    letter-spacing: 1px;
}

/* Screen bezel */
#popup5 .screen-bezel {
    background: #000;
    padding: 12px;
    border-radius: 4px;
    box-shadow:
        inset 0 0 10px rgba(0,0,0,0.8),
        inset 0 0 30px rgba(0,0,0,0.5);
}

/* Cropped emulator screen */
#popup5 .cropper {
    width: 847px;
    height: 463px;
    overflow: hidden;
    position: relative;
    background: black;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
}

#popup5 .cropper iframe {
    width: 1400px;
    height: 1600px;
    border: none;
    position: absolute;
    top: -230px;
    left: -510px;
    overflow: hidden;
    scrollbar-width: none;
}

#popup5 .cropper iframe::-webkit-scrollbar {
    display: none;
}

/* Monitor base */
#popup5 .monitor-base {
    width: 420px;
    height: 60px;
    background: #d9d4c8;
    margin: 0 auto;
    margin-top: 10px;
    border-radius: 6px;
    box-shadow:
        inset 0 0 0 3px #b8b2a6,
        inset 0 0 0 6px #e8e4da,
        0 6px 12px rgba(0,0,0,0.4);
    position: relative;
}

/* Base foot */
#popup5 .monitor-foot {
    width: 520px;
    height: 30px;
    background: #d9d4c8;
    margin: 0 auto;
    margin-top: 4px;
    border-radius: 4px;
    box-shadow:
        inset 0 0 0 3px #b8b2a6,
        inset 0 0 0 6px #e8e4da,
        0 8px 16px rgba(0,0,0,0.5);
}

/* Desk Note */
#popup5 .desk-note {
    position: absolute;
    bottom: 30px;
    right: 40px;
    width: 180px;
    height: 50px;
    background: #f7f2b8;
    border: 2px solid #d6d19a;
    border-radius: 6px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.4);
    cursor: pointer;
    transform-origin: bottom right;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
    z-index: 50;
}

#popup5 .desk-note-inner {
    font-family: "MS Sans Serif", sans-serif;
    font-size: 7px;
    color: #333;
    text-align: left;
    opacity: 100;
    transition: opacity 0.3s ease;
}

/* Open state */
#popup5 .desk-note.open {
    transform: translateY(-260px) translateX(-120px) scale(1.8) rotateX(12deg) rotateY(-8deg);
    box-shadow: 0 20px 40px rgba(0,0,0,0.6);
    z-index: 999;
    height: 120px;
}

#popup5 .desk-note.open .desk-note-inner {
    opacity: 1;
}

/* Glow effect for the note */
#popup5 .desk-note.glow {
    box-shadow: 0 0 20px 6px rgba(255, 255, 120, 0.9), 0 0 40px rgba(255,255,150,0.6);
    border-color: #fff7a0;
    z-index: 1000;
}

/* Pointer arrow that appears when idle */
#popup5 .note-pointer {
    position: absolute;
    right: 130px;
    bottom: 100px;
    font-size: 32px;
    color: #fff7a0;
    opacity: 0;
    pointer-events: none;
    transform: translateY(0);
    transition: opacity 0.4s ease;
    animation: pointer-bounce 1.2s infinite ease-in-out;
    z-index: 1200;
}

@keyframes pointer-bounce {
    0% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0); }
}

/* Show pointer when note glows */
#popup5 .desk-note.glow + .note-pointer {
    opacity: 1;
}
    </style>
</head>

<body>

    <button style="width: 100px; height: 50px;" onclick="toggleContent()">Enter</button>

    <!-- Global idle overlay for emulator -->
    <div class="idle-overlay"></div>

    <div id="content">
        <!-- DESKTOP ICONS -->
    <button class="win-button" data-popup="popup1">
        <img src="ThesisIcon.png" style="width:50px;height:50px;image-rendering:pixelated;">
        <span class="button-label windows-style">Thesis</span>
    </button>

    <button class="win-button" data-popup="popup2">
        <img src="ThesisIcon.png" style="width:50px;height:50px;image-rendering:pixelated;">
        <span class="button-label windows-style">Background</span>
    </button>

    <!-- POPUP WINDOWS -->
    <div id="popup1" class="popup">
        <div class="popupheader">
            <span>Thesis</span>
            <div class="window-controls">
                <span class="min-btn">_</span>
                <span class="full-btn">â–¡</span>
                <span class="close-btn">&times;</span>
            </div>
        </div>
        <div class="popupcontent">
            <p>This is popup #1</p>
        </div>
        <div class="popup-resize"></div>
    </div>

    <div id="popup2" class="popup">
        <div class="popupheader">
            <span>Background</span>
            <div class="window-controls">
                <span class="min-btn">_</span>
                <span class="full-btn">â–¡</span>
                <span class="close-btn">&times;</span>
            </div>
        </div>
        <div class="popupcontent">
            <p>Windows 3.0 greatly impacted the computer industry. In this paper, I will talk about what happened before, and what led up to the creation of Windows 3.0 and how it got started. Windows 3.0 was created because Bill Gates wanted to make Windows a commercially successful and user-friendly operating system by finally adding reliable multitasking and improving the user interface (White, 2023). Previous versions of Windows had been disappointing, but Windows 3.0 was an important step forward that was technologically ready for the market (UMA Technology, 2020). Before Windows 3.0, Microsoft released Windows 1.0 in 1985 and Windows 2.0 in 1987. These versions were simple graphical layers that sat on top of MS-DOS (Microsoft Disk Operating System). They didnâ€™t do much and were slow. People who used computers thought they felt clunky, and many programmers didnâ€™t want to make software for them (White, 2023). Appleâ€™s Macintosh looked nicer and felt easier to use, so Windows wasnâ€™t the favorite yet (The Register, 2025). In the 1980s, computer parts got a lot better. New Intel chips like the 80286 and 80386 let computers use more memory and do more things at once. Microsoft noticed this and realized they could finally make Windows run well (UMA Technology, 2020). Windows 3.0, released in May 1990, was built to take advantage of these faster processors and better memory handling. That meant programs could run smoother and computers could handle more tasks without slowing down (The Register, 2025). One big change in Windows 3.0 was how it looked and felt. The screen had cleaner icons, groups for programs, and a file manager that made finding stuff easier (UMA Technology, 2020). Windows 3.0 also started using virtual memory, which helped programs run even if the computer didnâ€™t have tons of RAM (White, 2023). It could run old MS-DOS programs in separate windows, so people got a real sense of multitasking for the first time (UMA Technology, 2020). Windows 3.0 became popular not just because it worked better but because Microsoft teamed up with computer makers, hardware companies bundled Windows with new PCs, so many people got it by default when they bought a machine (The Register, 2025). Software developers started writing programs specifically for Windows, which made the system more useful and attracted even more users (White, 2023). This growing set of apps and preinstalled systems helped Windows 3.0 spread quickly. Windows 3.0 changed how people used personal computers. It matched new hardware, looked more user-friendly, and finally let users run multiple things at once easily (UMA Technology, 2020). Those improvements won over both businesses and regular users. The success of Windows 3.0 set up Microsoft to keep improving Windows and become one of the biggest names in software (White, 2023).</p>
        </div>
        <div class="popup-resize"></div>
    </div>

    <button class="win-button" data-popup="popup3">
        <img src="ThesisIcon.png" style="width:50px;height:50px;image-rendering:pixelated;">
        <span class="button-label windows-style">Impact</span>
    </button>
    
    <div id="popup3" class="popup">
        <div class="popupheader">
            <span>Impact</span>
            <div class="window-controls">
                <span class="min-btn">_</span>
                <span class="full-btn">â–¡</span>
                <span class="close-btn">&times;</span>
            </div>
        </div>
        <div class="popupcontent">
            <article>
    <h2>Introduction</h2>
    <p>On May 22, 1990, Microsoft released Windows 3.0, a major milestone in computing history (Gralla). Earlier versions struggled, but Windows 3.0 became the first commercially successful graphical user interface (GUI) for IBM-compatible PCs. It reshaped how people interacted with computers and launched Microsoft into software dominance.</p>

    <h2>Short-Term Impact</h2>
    <p>Before Windows 3.0, most PCs ran on MS-DOS, a command-line system that uses commands to navigate the computer. Windows 3.0 introduced a colorful, icon-based GUI that let users manage files and run programs with a mouse, making computers more accessible (UMA Technology). It sold over 10 million copies in two years, helping Microsoft surpass IBM and Apple (Gralla). Developers quickly built Windows-compatible apps, boosting adoption. Features like Program Manager and VGA graphics made it user-friendly. Bundled apps like Solitaire helped users learn the interface (UMA Technology).</p>

    <h2>Reactions and Perspectives</h2>
    <p>Casual users liked and embraced the simplicity, while developers saw new opportunities. Some tech enthusiasts preferred command-line control and criticized GUIs. Apple accused Microsoft of copying its interface, sparking debates about innovation.</p>

    <h2>Long-Term Impact</h2>
    <p>Windows 3.0 set the stage for Microsoftâ€™s dominance and made GUIs standard (Gralla). It paved the way for Windows 95 and future versions. It also encouraged hardware makers to build Windows-optimized PCs, making computing more widespread.</p>

    <h2>Impact on Different Groups</h2>
    <p>Students gained access to educational software. Office workers used productivity tools. Families explored games and creativity. Developers thrived in the growing Windows ecosystem. However, early GUIs lacked accessibility features.</p>

    <h2>Conclusion</h2>
    <p>Windows 3.0 influenced later operating systems and helped normalize computing. Its GUI model inspired mobile and cloud tools. As someone interested in computing history, I see Windows 3.0 as that shaped the modular, visual interfaces we rely on today.</p>

    <h2>Key Terms</h2>
    <ul>
        <li><strong>GUI:</strong> A type of interface that uses icons to tell the user what does what instead of having to rely on the user knowing commands to operate the computer.</li>
        <li><strong>VGA:</strong> Video Graphics Array is an interface and connector that sends a video signal from the computer to a monitor (screen).</li>
    </ul>
</article>
        </div>
        <div class="popup-resize"></div>
    </div>

<button class="win-button" data-popup="popup4">
    <img src="ThesisIcon.png" style="width:50px;height:50px;image-rendering:pixelated;">
    <span class="button-label windows-style">Process Paper</span>
</button>

<div id="popup4" class="popup">
    <div class="popupheader">
        <span>Process Paper</span>
        <div class="window-controls">
            <span class="min-btn">_</span>
            <span class="full-btn">â–¡</span>
            <span class="close-btn">&times;</span>
        </div>
    </div>
    <div class="popupcontent">
        <div class="pdf-container">
            <object data="NHD Process Paper.pdf#zoom=100" type="application/pdf" width="100%" height="100%">
                <iframe src="NHD Process Paper.pdf#toolbar=0&navpanes=0&zoom=100" width="100%" height="100%" style="border: none;">
                    <p>Your browser does not support PDFs. You can <a href="NHD Process Paper.pdf#zoom=100">download the PDF</a> instead.</p>
                </iframe>
            </object>
        </div>
    </div>
    <div class="popup-resize"></div>
</div>

<button class="win-button" data-popup="popup5">
    <img src="ThesisIcon.png" style="width:50px;height:50px;image-rendering:pixelated;">
    <span class="button-label windows-style">The Experiment</span>
</button>

<div id="popup5" class="popup">
    <div class="popupheader">
        <span>The Experiment</span>
        <div class="window-controls">
            <span class="min-btn">_</span>
            <span class="full-btn">â–¡</span>
            <span class="close-btn">&times;</span>
        </div>
    </div>
    <div class="popupcontent" style="justify-content:center; align-items:flex-end; position:relative; overflow:hidden;">
        <div>
            <div class="crt-monitor">
                <div class="vents"></div>

                <div class="screen-bezel">
                    <div class="cropper">
                        <iframe 
                            src="https://www.pcjs.org/software/pcx86/sys/windows/3.00/" 
                            scrolling="no">
                        </iframe>
                    </div>
                </div>

                <div class="power-light"></div>
                <div class="brand-label">IBM VGA Display</div>
            </div>

            <div class="monitor-base"></div>
            <div class="monitor-foot"></div>
        </div>

        <div class="desk"></div>

        <!-- Desk Note -->
        <div class="desk-note" onclick="toggleNote()">
            <div class="desk-note-inner">
                <strong>How to Use the Emulator</strong><br><br>
                â€¢ Click inside the screen to activate controls.<br>
                â€¢ Use your mouse to open apps in Program Manager.<br>
                â€¢ Keyboard works normally once active.<br>
                â€¢ If the emulator freezes, press Ctrl+Alt+Del.<br>
                â€¢ Click outside the monitor to release your mouse.<br>
                â€¢ Performance varies by browser and device.
            </div>
        </div>

        <!-- Pointer -->
        <div class="note-pointer">ðŸ¡‡</div>
    </div>
    <div class="popup-resize"></div>
</div>
    </div>

<script>

    function toggleContent() {
    var content = document.getElementById("content");
    if (content.style.display === "none") {
        content.style.display = "block"; // Show content
    } else {
        content.style.display = "none"; // Hide content
    }
}
/* ------------------------------
   WINDOW STACKING (BRING TO FRONT)
------------------------------ */
let zIndexCounter = 10;

function bringToFront(el) {
    zIndexCounter++;
    el.style.zIndex = zIndexCounter;
}

/* ------------------------------
   ICON + POPUP LOGIC
------------------------------ */
document.querySelectorAll(".win-button").forEach(button => {
    const popupId = button.dataset.popup;
    const popup = document.getElementById(popupId);

    // SINGLE CLICK: select
    button.addEventListener("click", e => {
        e.stopPropagation();
        document.querySelectorAll(".win-button").forEach(b => b.classList.remove("selected"));
        button.classList.add("selected");
    });

    // DOUBLE CLICK: open popup
    button.addEventListener("dblclick", () => {
        popup.style.display = "block";

        // Force layout so offsetWidth/Height are correct
        popup.getBoundingClientRect();

        // Fix PDF not loading
        const pdf = popup.querySelector("object");
        if (pdf) {
            const src = pdf.getAttribute("data");
            pdf.setAttribute("data", src);
        }

        // Center window
        const top = (window.innerHeight - popup.offsetHeight) / 2;
        const left = (window.innerWidth - popup.offsetWidth) / 2;

        popup.style.top = `${Math.max(0, top)}px`;
        popup.style.left = `${Math.max(0, left)}px`;

        bringToFront(popup);
        dragElement(popup);
        makeResizable(popup);
        setupWindowControls(popup);
    });

    // CLICKING WINDOW BRINGS TO FRONT
    popup.addEventListener("mousedown", () => bringToFront(popup));
});

// CLICK AWAY: deselect icons
document.addEventListener("click", () => {
    document.querySelectorAll(".win-button").forEach(b => b.classList.remove("selected"));
});

/* ------------------------------
   DRAGGING LOGIC
------------------------------ */
function dragElement(elmnt) {
    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
    let outlineElm = null;
    const header = elmnt.querySelector(".popupheader");

    header.onmousedown = function(e) {
        e.preventDefault();
        bringToFront(elmnt);

        outlineElm = document.createElement("div");
        outlineElm.classList.add("dragging-outline");
        outlineElm.style.width = elmnt.offsetWidth + "px";
        outlineElm.style.height = elmnt.offsetHeight + "px";
        outlineElm.style.top = elmnt.offsetTop + "px";
        outlineElm.style.left = elmnt.offsetLeft + "px";
        document.body.appendChild(outlineElm);

        pos3 = e.clientX;
        pos4 = e.clientY;

        document.onmouseup = function() {
            if (outlineElm) {
                elmnt.style.top = outlineElm.style.top;
                elmnt.style.left = outlineElm.style.left;
                outlineElm.remove();
                outlineElm = null;
            }
            document.onmouseup = null;
            document.onmousemove = null;
        };

        document.onmousemove = function(e) {
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;

            if (outlineElm) {
                let newTop = outlineElm.offsetTop - pos2;
                let newLeft = outlineElm.offsetLeft - pos1;

                newTop = Math.max(0, newTop);
                newLeft = Math.max(0, newLeft);

                newTop = Math.min(window.innerHeight - outlineElm.offsetHeight, newTop);
                newLeft = Math.min(window.innerWidth - outlineElm.offsetWidth, newLeft);

                outlineElm.style.top = newTop + "px";
                outlineElm.style.left = newLeft + "px";
            }
        };
    };
}

/* ------------------------------
   RESIZING LOGIC
------------------------------ */
function makeResizable(popup) {
    const resizer = popup.querySelector(".popup-resize");

    let startX, startY, startW, startH;

    resizer.addEventListener("mousedown", e => {
        e.preventDefault();
        bringToFront(popup);

        startX = e.clientX;
        startY = e.clientY;
        startW = parseInt(getComputedStyle(popup).width, 10);
        startH = parseInt(getComputedStyle(popup).height, 10);

        document.addEventListener("mousemove", resizeDrag);
        document.addEventListener("mouseup", stopResize);
    });

    function resizeDrag(e) {
        popup.style.width = startW + (e.clientX - startX) + "px";
        popup.style.height = startH + (e.clientY - startY) + "px";
    }

    function stopResize() {
        document.removeEventListener("mousemove", resizeDrag);
        document.removeEventListener("mouseup", stopResize);
    }
}

/* ------------------------------
   MINIMIZE + FULLSCREEN LOGIC
------------------------------ */
function setupWindowControls(popup) {
    const minBtn = popup.querySelector(".min-btn");
    const fullBtn = popup.querySelector(".full-btn");
    const closeBtn = popup.querySelector(".close-btn");

    let isFullscreen = false;
    let prev = { top: 0, left: 0, width: 0, height: 0 };

    // MINIMIZE
    minBtn.addEventListener("click", () => {
        popup.style.display = "none";
    });

    // FULLSCREEN / RESTORE
    // FULLSCREEN / RESTORE
fullBtn.addEventListener("click", () => {
    if (!isFullscreen) {
        prev = {
            top: popup.offsetTop,
            left: popup.offsetLeft,
            width: popup.offsetWidth,
            height: popup.offsetHeight
        };

        // True fullscreen
        popup.style.position = "fixed";
        popup.style.top = "0";
        popup.style.left = "0";
        popup.style.width = "100%";
        popup.style.height = "100%";
        popup.style.margin = "0";
        popup.style.padding = "0";

        // Remove borders during fullscreen
        popup.style.border = "none";
        popup.style.boxSizing = "border-box";

        // Hide the resize handle in fullscreen
        const resizer = popup.querySelector(".popup-resize");
        if (resizer) resizer.style.display = "none";

        isFullscreen = true;
        fullBtn.textContent = "â";
    } else {
        // Restore previous size and position
        popup.style.position = "absolute";
        popup.style.top = prev.top + "px";
        popup.style.left = prev.left + "px";
        popup.style.width = prev.width + "px";
        popup.style.height = prev.height + "px";

        // Restore borders
        popup.style.border = "";
        popup.style.padding = "";
        popup.style.margin = "";

        // Restore resize handle
        const resizer = popup.querySelector(".popup-resize");
        if (resizer) resizer.style.display = "block";

        isFullscreen = false;
        fullBtn.textContent = "â–¡";
    }

    bringToFront(popup);
});

    // CLOSE
    closeBtn.addEventListener("click", () => {
        popup.style.display = "none";
    });
}

/* ------------------------------
   EMULATOR IDLE + NOTE LOGIC
------------------------------ */

/* Track if the note has been clicked */
let noteClicked = false;

function toggleNote() {
    const note = document.querySelector('#popup5 .desk-note');
    const overlay = document.querySelector('.idle-overlay');
    if (!note) return;

    note.classList.toggle('open');
    noteClicked = true;
    note.classList.remove("glow");
    if (overlay) overlay.style.opacity = "0";
}

/* Idle Detection System */
let idleTimer;
const idleDelay = 10000; // 10 seconds
const overlay = document.querySelector('.idle-overlay');
const note = document.querySelector('#popup5 .desk-note');

function resetIdle() {
    if (!overlay || !note) return;

    // If the user already clicked the note, disable idle system entirely
    if (noteClicked) {
        overlay.style.opacity = "0";
        note.classList.remove("glow");
        clearTimeout(idleTimer);
        return;
    }

    overlay.style.opacity = "0";
    note.classList.remove("glow");

    clearTimeout(idleTimer);
    idleTimer = setTimeout(goIdle, idleDelay);
}

function goIdle() {
    if (!overlay || !note) return;

    // If the note was clicked, never go idle again
    if (noteClicked) {
        overlay.style.opacity = "0";
        note.classList.remove("glow");
        return;
    }

    overlay.style.opacity = "1";
    note.classList.add("glow");
}

/* Reset idle timer on any activity */
['mousedown','touchstart'].forEach(evt => {
    window.addEventListener(evt, resetIdle);
});

/* Start timer on load */
resetIdle();
</script>

</body>
</html>
